const Romcal = require('./index.js');
const moment = require('moment');


//
// let dates = Romcal.calendarFor({
//   year: 2018
// });
//
// let january = Romcal.queryFor(dates, {
//   month: 0
// });
//
// let sundays = Romcal.queryFor(dates, {
//   day: 0
// });
//
// console.log('dates', dates );
// console.log('january', january );
// console.log('sundays', sundays );


var locale = process.argv[2];
moment.locale(locale);
var country = process.argv[3];
var dateArg = moment(process.argv[4]);

// var test = Romcal.calendarFor({
//   year: 2015,
//   query: {
//     group: 'ferialCycles'
//   }
// });

var date = Romcal.Dates.epiphany( 1969 );
date.weekday();

let config = {
  year: parseInt(dateArg.format('YYYY')),
  locale: locale,
  country: country,
};

var dates = Romcal.calendarFor(config);

console.log(dateArg.format('llll'));

function showDate(dates) {
  dates.forEach(date => {
    if (dateArg.isSame(moment(date.date.slice(0,10)))) {
      let meta = date.data.meta;
      delete date.data.meta;
      console.log(date);
      console.log({meta: meta});
      // console.log({
      //   date: date.moment,
      //   name: date.name,
      //   season: date.data.season.value,
      //   key: date.key,
      //   meta: date.data.meta
      // });
    }
  });
}

//console.log('$ ', locale)
//showDate(dates[26])
showDate(dates);
